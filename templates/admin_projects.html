{{ define "admin_projects" }}
{{ template "base" . }}
{{ end }}

{{ define "title" }}Admin â€“ Projects{{ end }}

{{ define "content" }}

<h2 class="mb-4 text-xl font-semibold">Pending Projects</h2>

{{ if .Pending }}
<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  {{ range .Pending }}
  <div class="bg-white rounded-lg shadow-sm border overflow-hidden">

    {{ if .ImagePath }}
    <img src="{{ .ImagePath }}" class="h-48 w-full object-cover" alt="{{ .Title }}">
    {{ end }}

    <div class="p-4 space-y-2">
      <h3 class="text-lg font-semibold">{{ .Title }}</h3>
      <p class="text-sm text-gray-600">{{ .Description }}</p>
      <p class="text-xs text-gray-400">Submitted by {{ .AuthorEmail }}</p>
    </div>

    <!-- Admin actions -->
    <div class="flex gap-2 border-t p-3 bg-gray-50">
      <form action="/admin/projects/{{ .ID }}/approve" method="post">
        <button class="text-sm text-green-600 hover:underline">
          Approve
        </button>
      </form>

      <form action="/admin/projects/{{ .ID }}/delete" method="post"
            onsubmit="return confirm('Delete this project?');">
        <button class="text-sm text-red-600 hover:underline">
          Delete
        </button>
      </form>
    </div>

  </div>
  {{ end }}
</div>
{{ else }}
<p>No pending projects.</p>
{{ end }}


<hr>

<h2 class="mt-10 mb-4 text-xl font-semibold">Approved Projects</h2>

{{ if .Approved }}
<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  {{ range .Approved }}
  <div class="bg-white rounded-lg shadow-sm border overflow-hidden">

    {{ if .ImagePath }}
    <img src="{{ .ImagePath }}" class="h-48 w-full object-cover" alt="{{ .Title }}">
    {{ end }}

    <div class="p-4 space-y-2">
      <h3 class="text-lg font-semibold">{{ .Title }}</h3>
      <p class="text-sm text-gray-600">{{ .Description }}</p>
      <p class="text-xs text-gray-400">Submitted by {{ .AuthorEmail }}</p>
    </div>

    <!-- Admin actions -->
    <div class="flex gap-2 border-t p-3 bg-gray-50">
      <form action="/admin/projects/{{ .ID }}/unapprove" method="post"
            onsubmit="return confirm('Move back to pending?');">
        <button class="text-sm text-yellow-600 hover:underline">
          Unapprove
        </button>
      </form>

      <form action="/admin/projects/{{ .ID }}/delete" method="post"
            onsubmit="return confirm('Delete this project?');">
        <button class="text-sm text-red-600 hover:underline">
          Delete
        </button>
      </form>
    </div>

  </div>
  {{ end }}
</div>
{{ else }}
<p>No approved projects.</p>
{{ end }}

{{ end }}